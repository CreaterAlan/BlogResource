---
title: 网络知识--NS,DNS,网关...
date: 2020-02-15 21:19:42
tags: linux
categories: 网络
---

# DNS,IP地址,网关？这都是什么

## IP地址

- 常见的IP地址分为公网IP，内网IP

- IP地址 == 网络地址（网段）+主机地址

  如：IP地址192.168.100.1 == 网络地址192.168.100.0 + 主机地址0.0.0.1

## 两个设备间的联通

- 两个设备网络地址相同且主机地址不同则可以联通
- 通过网关联通： 若A主机发现数据包目的主机不在本地网络中，就把数据包发送到自己的网关，再由A网关发送给B网关，B网关发给B主机

## 默认网关

- 原两台主机间通信时，如果网络地址不同则无法通信，网关起到转发的作用
- 设计方法：
  1. 手动设置：默认网关的地址须是主机所在的网段IP地址
  2. 自动设计：DHCP，自动获取网关（推荐方法）
- 英文：GATWAY

## 子网掩码

判断任意两台设备的地址是否属于同一网络的根据

实现方法：两台计算各自的IP地址与各自子网掩码进行and运算，得出结果后，则说明这两台设备处于同一网络

## nameserver和dns的关系

- DNS服务器：把域名翻译成IP地址
- DS（nameserver）: 域名服务器，用来指定该域名由那个DNS服务器来解析
- A记录：域名对应的IP记录（可以理解成数据表里的单条记录）

PS：使用哪里的NS，相应的解析记录（A记录，CNAME等）就需要再哪里设置，比如域名是在万网注册的，NS被改成了GoDaddy的，那么以后解析就需要再GoDaddy里做，万网的记录不会再生效。



# 补充相关知识点

## 1. LAN口和WAN口的区别?

WAN口用来连接外网，LAN口连接内网

一般情况下，LAN口下的主机组成了局域网，设备间可以互相发现



## 2. 输入URL后网络通信中发生了什么?

（以下回答引用自：https://blog.csdn.net/zgege/article/details/81587502）

1，在应用层输入url

用户输入https://mp.csdn.net时，其中http表示采用http协议进行传输,mp.csdn.net为网络地址，表示请求的资源在那个位置（主机）。一般网络地址为IP地址，此处为域名，是IP地址的包装。为了让用户方便使用。

2.应用层DNS解析域名，获得对端IP地址

计算机在通信时是通过IP地址辨识，而不是域名。
域名查找顺序：本地缓存->系统缓存->浏览器缓存->ISP缓存->根域名服务器->主域名服务器

如果本地缓存有就直接使用，并不是每一个过程都需要走。没有才继续往下走。直到获得IP地址。

3.应用层客户端发送HTTP请求

HTTP请求包括请求报头和请求主体。其中请求报头中包含了请求方法，请求资源，请求所使用放入协议（http,smtp等），以及返回的资源是否需要缓存，客户端是否需要发送cookie等。

4.传输层TCP传输报文

位于传输层的TCP协议提供可靠的字节流服务，他为了方便传输，将大块的数据分割成以报文段为基本单位的数据包进行管理。并未他们编号。方便接收端收到报文后进行组装，还原报头信息。

为了保证可靠性传输，TCP采用三次握手来保证可靠性传输。

5.网络层IP协议查询MAC地址

IP协议把TCP分割的数据包传送给接收方。而要保证却是能够传送给对方主机还需要MAC地址，也就是物理地址。IP地址和MAC地址是一一对应关系。一个设备有且只有一个MAC地址。IP地址可以更换，MAC不会变。ARP协议就是讲IP协议转换成MAC地址的协议，利用ARP协议，找到MAC地址，当通信的双方不在同一个局域网时，还需要多次中转，才能到达目标，在中转时，通过下一个MAC地址来搜索下一个中转目标。

6.数据到达链路层

找到对方的MAC地址后，就将数据包放到链路层进行传输，封装上链路层特有的报头，然后交付给物理层，物理层通过实际的电路如双绞线进行传输。

走到数据链路层，客户端的请求发送阶段完毕。

7.服务器接受请求

服务端主机的网卡接收到数据后，驱动操作系统拿到数据，自下而上进行解包，数据包到链路层，就解析客户端在链路层封装的报头信息，提取报头信息内容，如目标MAC地址，IP地址等。

到达网络层，提取IP协议报头信息，到达传输层，解析传输层协议报头，

到达应用层，解析HTTP报头信息，获得客户端请求的资源和方法。查找到资源后。将资源返回给客户端，并返回响应报文。

响应报文中包括协议名称/协议版本，状态码，状态码描述等信息。其中常见状态码：200 表示请求资源成功。301：永久重定向，表示资源已经永久性重定向到指定位置。

8.请求成功返回相应资源
请求成功后，服务器会返回相应的HTMML文件，该文件的传输方式又会从应用层出发，自上问下传送，到达对端时，自下而上进行解析。

---

以上由于在配置华为云HIlens设备时遇到一些名词概念不理解，所以产出本文。

配置失败根本原因还是自己读文档的时候容易跳跃，

